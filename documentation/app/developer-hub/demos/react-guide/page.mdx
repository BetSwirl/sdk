# React Integration Guide

Build a Web3 casino with just a few steps! This guide will walk you through creating a casino application using BetSwirl's React UI library.

**What you'll build:** A fully functional dice game with multi-chain support, custom theming, and background image - exactly like our [live demo](https://ui-react-demo.betswirl.com).

**Time:** ~10 minutes

## Step 1: Create Project

```shell
# node --version
# v24.2.0

npm create vite@latest betswirl-ui-react-demo -- --template react-ts
```

When prompted:
- **Use rolldown-vite (Experimental)?** ‚Üí Select **No**
- **Install with npm and start now?** ‚Üí Select **Yes**

This will automatically install dependencies and start the dev server. Open http://localhost:5173 in your browser - you should see the default Vite + React welcome page.

Stop the dev server (Ctrl+C) and navigate to the project directory:

```shell
cd betswirl-ui-react-demo
```

## Step 2: Install BetSwirl

```shell
npm i @betswirl/ui-react
```

Package: [@betswirl/ui-react on npm](https://www.npmjs.com/package/@betswirl/ui-react)

## Step 3: Setup Providers

Replace the entire content of `src/main.tsx` with:

```tsx
import { StrictMode } from 'react'
import { createRoot } from 'react-dom/client'
import { OnchainKitProvider, type AppConfig } from '@coinbase/onchainkit'
import { QueryClient, QueryClientProvider } from '@tanstack/react-query'
import { http, type Hex } from 'viem'
import { WagmiProvider, createConfig } from 'wagmi'
import { base, polygon, arbitrum } from 'wagmi/chains'
import {
  BalanceProvider,
  BetSwirlSDKProvider,
  FreebetsProvider,
  LeaderboardProvider,
  TokenProvider,
  type TokenWithImage
} from '@betswirl/ui-react'
import './index.css'
import '@betswirl/ui-react/styles.css'
import App from './App.tsx'

const queryClient = new QueryClient()

// Use custom RPC if provided in .env, otherwise use default
const baseRpc = import.meta.env.VITE_BASE_RPC_URL
const polygonRpc = import.meta.env.VITE_POLYGON_RPC_URL
const arbitrumRpc = import.meta.env.VITE_ARBITRUM_RPC_URL

const config = createConfig({
  chains: [base, polygon, arbitrum],
  transports: {
    [base.id]: baseRpc ? http(baseRpc) : http(),
    [polygon.id]: polygonRpc ? http(polygonRpc) : http(),
    [arbitrum.id]: arbitrumRpc ? http(arbitrumRpc) : http(),
  },
})

const onChainKitConfig: AppConfig = {
  wallet: {
    display: "modal",
  }
}

// Optional: Define tokens for your application
const DEGEN_TOKEN: TokenWithImage = {
  address: "0x4ed4E862860beD51a9570b96d89aF5E1B0Efefed" as Hex,
  symbol: "DEGEN",
  decimals: 18,
  image: "https://www.betswirl.com/img/tokens/DEGEN.svg"
}

const ETH_TOKEN: TokenWithImage = {
  address: "0x0000000000000000000000000000000000000000" as Hex,
  symbol: "ETH",
  decimals: 18,
  image: "https://www.betswirl.com/img/tokens/ETH.svg"
}

// Optional: Limit available tokens to specific ones
const ALLOWED_TOKENS = [
  DEGEN_TOKEN.address,
  ETH_TOKEN.address,
  "0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913" as Hex, // USDC
  "0x94025780a1aB58868D9B2dBBB775f44b32e8E6e5" as Hex, // BETS
]

createRoot(document.getElementById('root')!).render(
  <StrictMode>
    <WagmiProvider config={config}>
      <QueryClientProvider client={queryClient}>
        <OnchainKitProvider chain={base} config={onChainKitConfig}>
          <BetSwirlSDKProvider
            initialChainId={base.id}
            supportedChains={[base.id, polygon.id, arbitrum.id]}
            bankrollToken={DEGEN_TOKEN}     // Optional: set default betting token
            filteredTokens={ALLOWED_TOKENS} // Optional: limit available tokens
          >
            <TokenProvider>
              <BalanceProvider>
                <FreebetsProvider>
                  <LeaderboardProvider>
                    <App />
                  </LeaderboardProvider>
                </FreebetsProvider>
              </BalanceProvider>
            </TokenProvider>
          </BetSwirlSDKProvider>
        </OnchainKitProvider>
      </QueryClientProvider>
    </WagmiProvider>
  </StrictMode>,
)
```

**What's happening here:**
- **Wagmi & React Query**: Manage blockchain connections and data fetching
- **OnchainKit**: Provides wallet connection UI
- **BetSwirl Providers**: Handle betting logic, token management, freebets, and leaderboards
- **Multi-chain support**: Base, Polygon, and Arbitrum configured
- **Custom RPCs**: Fallback to default public RPCs if env variables not set
- **Token filtering**: Limit available tokens to DEGEN, ETH, USDC, and BETS

## Step 4: Add Game Component

Replace the entire content of `src/App.tsx` with:

```tsx
import {DiceGame} from '@betswirl/ui-react'

function App() {
    return (
        <DiceGame
            theme="dark"
            customTheme={{
                "--primary": "rgb(225 159 31)",
                "--play-btn-font": "rgb(74 41 24)",
            } as React.CSSProperties}
            backgroundImage="/game-bg.png"
        />
    )
}

export default App
```

**What's happening here:**
- **DiceGame component**: Fully functional dice game with betting panel
- **Dark theme**: Dark mode interface
- **Custom colors**: Gold primary color (`rgb(225 159 31)`) and dark brown button text
- **Background image**: Will add in next step

## Step 5: Add Background Images

Download two background images - one for the page and one for the game component:

1. **Download page background**: Right-click ‚Üí [page-bg.png](https://raw.githubusercontent.com/BetSwirl/ui-react-demo/main/public/page-bg.png) ‚Üí "Save image as..."
2. **Download game background**: Right-click ‚Üí [game-bg.png](https://raw.githubusercontent.com/BetSwirl/ui-react-demo/main/public/game-bg.png) ‚Üí "Save image as..."
3. **Save both images** to the `public/` folder:
   ```
   betswirl-ui-react-demo/
   ‚îú‚îÄ‚îÄ public/
   ‚îÇ   ‚îú‚îÄ‚îÄ page-bg.png   ‚Üê Background for entire page
   ‚îÇ   ‚îî‚îÄ‚îÄ game-bg.png   ‚Üê Background for game component
   ‚îú‚îÄ‚îÄ src/
   ‚îî‚îÄ‚îÄ ...
   ```

4. **Add page background style** to `src/index.css`:

Open `src/index.css` and add these styles to the `body` section (around line 25):

```css
body {
  width: 100%;
  margin: 0;
  display: flex;
  place-items: center;
  min-width: 328px;
  min-height: 100vh;
  background-image: url('/page-bg.png');
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  background-attachment: fixed;
}

#root {
  margin: 0 auto;
  display: flex;
  align-items: center;
}
```

**Note:**
- `page-bg.png` = full page background (behind everything)
- `game-bg.png` = game component background (behind betting panel and dice)

## Step 6: Run Your Casino

```shell
npm run dev
```

Open [http://localhost:5173](http://localhost:5173)

You should see a dice game with gold accents on a dark background - exactly like the [live demo](https://ui-react-demo.betswirl.com).

## Step 7: Push to GitHub

Before deploying, you need to push your code to GitHub.

**1. Initialize Git and commit your code:**

```bash
git init
git add .
git commit -m "feat: initial casino setup"
```

**2. Create a new repository on GitHub:**

- Go to [github.com](https://github.com) and sign in
- Click the **"+"** button in top right ‚Üí **"New repository"**
- Repository name: `my-casino-app` (or any name you prefer)
- Make it **Private**
- **Do not** initialize with README, .gitignore, or license
- Click **"Create repository"**

**3. Connect your local project to GitHub:**

GitHub will show you commands after creating the repository. Copy and run them:

```bash
git remote add origin https://github.com/YOUR_USERNAME/my-casino-app.git
git branch -M main
git push -u origin main
```

Replace `YOUR_USERNAME` with your GitHub username.

**4. Verify:** Refresh the GitHub page - you should see your code uploaded.

## Step 8: Deploy to Vercel

Now deploy your casino to the web and get a public URL.

**1. Sign up on Vercel:** Go to [vercel.com](https://vercel.com) ‚Üí **"Sign Up"** ‚Üí **"Continue with GitHub"** ‚Üí Authorize access

**2. Create new project:** Click **"Add New..." ‚Üí "Project"** ‚Üí Find `my-casino-app` ‚Üí **"Import"**

**3. Configure and deploy:** Vercel auto-detects Vite settings. Leave defaults and click **"Deploy"**

**4. Wait for build to complete** (1-2 minutes), then copy your production URL: `https://my-casino-app.vercel.app`

**5. Test your live casino:** Open the URL, connect wallet, place a bet - it works!

**What's next:** Every `git push` automatically deploys. GitHub now shows a "Deployments" tab with deployment history and status checks.

## Step 9: Add Affiliate & Custom RPC

As an affiliate, you earn **30% of house edge revenue** from every bet placed through your casino. Add your wallet address to start earning, and configure custom RPC endpoints for better performance.

**Learn more:** [Affiliate Program](/protocol-hub/partners/affiliates) - track earnings, create freebets, manage leaderboards, and claim revenue.

**1. Add affiliate address to `src/main.tsx`:**

Find the `BetSwirlSDKProvider` component and add `affiliateAddress`:

```tsx
<BetSwirlSDKProvider
    initialChainId={base.id}
    supportedChains={[base.id, polygon.id, arbitrum.id]}
    affiliateAddress="0xYourWalletAddress" // Add this line
    bankrollToken={DEGEN_TOKEN}
    filteredTokens={ALLOWED_TOKENS}
>
```

Replace `0xYourWalletAddress` with your actual wallet address.

**2. Add RPC endpoints to Vercel:**

- Go to your project on [vercel.com](https://vercel.com)
- Click **"Settings"** ‚Üí **"Environment Variables"**
- Add these variables:

| Name | Value |
|------|-------|
| `VITE_BASE_RPC_URL` | Your Base RPC URL (e.g., from Alchemy, Infura) |
| `VITE_POLYGON_RPC_URL` | Your Polygon RPC URL |
| `VITE_ARBITRUM_RPC_URL` | Your Arbitrum RPC URL |

Click **"Save"** after each.

**3. Deploy changes:**

```bash
git add .
git commit -m "feat: add affiliate and custom rpc"
git push
```

Vercel will automatically redeploy with your affiliate address and RPC endpoints.

**What you get:**
- üí∞ Earn commission on every bet placed through your casino
- ‚ö° Faster, more reliable RPC connections
- üöÄ Production-ready setup

---

## Optional Enhancements

The base setup above gives you a fully functional casino. Below are optional features you can add to enhance your application.

### üéÆ Multiple Games

Add more games and let users switch between them.

**First, fix button styles in `src/index.css`:**

Find the `button` styles (around line 50) and replace the entire block with:

```css
button {
  font-family: inherit;
  cursor: pointer;
}
button:focus-visible {
  outline: 2px solid rgba(225, 159, 31, 0.5);
  outline-offset: 2px;
}
```

This removes Vite's default gray backgrounds and blue borders that would conflict with navigation styling.

**Then replace your `src/App.tsx` with:**

```tsx
import { useState } from 'react'
import { CoinTossGame, DiceGame, RouletteGame } from '@betswirl/ui-react'

function App() {
  const [game, setGame] = useState<'dice' | 'cointoss' | 'roulette'>('dice')

  return (
    <div>
      {/* Note: Inline styles used for tutorial simplicity.
          For production, use CSS modules or styled-components */}
      <nav style={{
        display: 'flex',
        gap: '8px',
        justifyContent: 'center',
        padding: '12px 0',
        marginBottom: '12px',
      }}>
        {(['dice', 'cointoss', 'roulette'] as const).map((g) => (
          <button
            key={g}
            onClick={() => setGame(g)}
            style={{
              padding: '8px 16px',
              background: game === g ? 'rgb(225 159 31)' : 'rgba(255, 255, 255, 0.05)',
              color: game === g ? 'rgb(74 41 24)' : 'rgba(255, 255, 255, 0.6)',
              border: game === g ? 'none' : '1px solid rgba(255, 255, 255, 0.1)',
              borderRadius: '6px',
              cursor: 'pointer',
              fontSize: '14px',
              fontWeight: '500',
              transition: 'all 0.2s',
            }}
            onMouseEnter={(e) => {
              if (game !== g) {
                e.currentTarget.style.background = 'rgba(255, 255, 255, 0.1)'
                e.currentTarget.style.color = 'rgba(255, 255, 255, 0.9)'
              }
            }}
            onMouseLeave={(e) => {
              if (game !== g) {
                e.currentTarget.style.background = 'rgba(255, 255, 255, 0.05)'
                e.currentTarget.style.color = 'rgba(255, 255, 255, 0.6)'
              }
            }}
          >
            {g === 'cointoss' ? 'Coin Toss' : g.charAt(0).toUpperCase() + g.slice(1)}
          </button>
        ))}
      </nav>

      {game === 'dice' && <DiceGame theme="dark" customTheme={{ "--primary": "rgb(225 159 31)", "--play-btn-font": "rgb(74 41 24)" } as React.CSSProperties} backgroundImage="/game-bg.png" />}
      {game === 'cointoss' && <CoinTossGame theme="dark" customTheme={{ "--primary": "rgb(225 159 31)", "--play-btn-font": "rgb(74 41 24)" } as React.CSSProperties} backgroundImage="/game-bg.png" />}
      {game === 'roulette' && <RouletteGame theme="dark" customTheme={{ "--primary": "rgb(225 159 31)", "--play-btn-font": "rgb(74 41 24)" } as React.CSSProperties} backgroundImage="/game-bg.png" />}
    </div>
  )
}

export default App
```

### üèÜ Leaderboards Integration

**What it does:** Game components already have leaderboards built-in with a "Play now" button. This enhancement makes the "Play now" button automatically switch to the correct game, chain, and token for that tournament (instead of just closing the leaderboard panel).

**Replace your `src/App.tsx` with:**

```tsx
import { useState } from 'react'
import { CASINO_GAME_TYPE, LEADERBOARD_CASINO_RULES_GAME } from '@betswirl/sdk-core'
import { CoinTossGame, DiceGame, type PlayNowEvent } from '@betswirl/ui-react'

export default function App() {
  const [currentGame, setCurrentGame] = useState(CASINO_GAME_TYPE.DICE)

  const handlePlayNow = (event: PlayNowEvent) => {
    // Switch to the appropriate game
    if (event.games.includes(LEADERBOARD_CASINO_RULES_GAME.COINTOSS)) {
      setCurrentGame(CASINO_GAME_TYPE.COINTOSS)
    } else if (event.games.includes(LEADERBOARD_CASINO_RULES_GAME.DICE)) {
      setCurrentGame(CASINO_GAME_TYPE.DICE)
    }
    // You can also handle chain/token switching here
  }

  return (
    <div>
      {currentGame === CASINO_GAME_TYPE.COINTOSS && (
        <CoinTossGame theme="dark" onPlayNow={handlePlayNow} />
      )}
      {currentGame === CASINO_GAME_TYPE.DICE && (
        <DiceGame theme="dark" onPlayNow={handlePlayNow} />
      )}
    </div>
  )
}
```

**Note:** The `LeaderboardProvider` is already configured in main.tsx (Step 3), so you only need to replace App.tsx with this code to enable leaderboards.

### üí∞ Affiliate Program

Earn 30% commission on house edge by adding your affiliate wallet address:

```tsx
<BetSwirlSDKProvider
  initialChainId={base.id}
  supportedChains={[base.id, polygon.id, arbitrum.id]}
  affiliate="0xYourWalletAddress"  // Add this line
>
```

**How to join:**
1. Visit [betswirl.com/affiliate](https://www.betswirl.com/affiliate)
2. Connect your wallet
3. Copy your wallet address
4. Add it to the `affiliate` prop
5. Track earnings on the affiliate dashboard

### ‚ö° Production RPC Setup

For production, use your own RPC endpoints for better reliability:

1. Create `.env` file in project root:

```bash
VITE_BASE_RPC_URL=https://your-base-rpc.com
VITE_POLYGON_RPC_URL=https://your-polygon-rpc.com
VITE_ARBITRUM_RPC_URL=https://your-arbitrum-rpc.com
```

2. The code in main.tsx already handles custom RPCs via environment variables

**Recommended RPC providers:**
- [Alchemy](https://www.alchemy.com/)
- [Infura](https://www.infura.io/)
- [QuickNode](https://www.quicknode.com/)

### üé® Custom Branding

Customize colors to match your brand:

```tsx
<DiceGame
  theme="dark"
  customTheme={{
    "--primary": "rgb(59 130 246)",           // Your brand color
    "--play-btn-font": "rgb(255 255 255)",    // Button text color
    "--background": "rgb(17 24 39)",          // Background color
  } as React.CSSProperties}
  backgroundImage="/your-background.png"
/>
```

---

## Deploy

### Push to GitHub

```shell
git init
git add .
git commit -m "Add BetSwirl casino game"
```

### Deploy to Vercel

1. Sign in to [vercel.com](https://vercel.com) with GitHub
2. Click "Add New..." ‚Üí "Project"
3. Select your repository
4. Add environment variables (if using custom RPCs):
   - `VITE_BASE_RPC_URL`
   - `VITE_POLYGON_RPC_URL`
   - `VITE_ARBITRUM_RPC_URL`
5. Click "Deploy"
6. Get public URL after ~2 minutes

---

## Configuration

### BetSwirlSDKProvider Props

| Prop | Type | Description |
|------|------|-------------|
| `initialChainId` | `number` | **Required.** Chain ID to initialize the SDK with |
| `supportedChains` | `number[]` | **Required.** Array of chain IDs to enable multi-chain support. Must include at least one supported chain ID |
| `affiliate` | `string` | Optional. Your wallet address to receive affiliate commissions. If not provided, default affiliate will be used |
| `bankrollToken` | `TokenWithImage` | Optional. Default token for betting. Must include `address`, `symbol`, `decimals`, and `image` properties. [See available tokens ‚Üí](https://documentation-betswirl.vercel.app/developer-hub/demos/miniapp/checking-available-tokens) |
| `filteredTokens` | `string[]` | Optional. Array of token addresses to limit which tokens are available for selection. If not provided, all supported tokens will be available. [Learn more about token filtering ‚Üí](https://documentation-betswirl.vercel.app/developer-hub/demos/miniapp/checking-available-tokens#token-filtering) |

### Multi-Chain Support

To enable multiple chains, you need to:
1. Configure the chains in wagmi config
2. Pass the same chain IDs to `supportedChains` prop

#### Supported Chains

BetSwirl protocol is deployed on the following chains:

**Mainnet:**
- Base (8453)
- Polygon (137)
- Avalanche (43114)
- Arbitrum (42161)
- BSC/BNB Chain (56)

**Testnet:**
- Base Sepolia (84532)
- Polygon Amoy (80002)
- Avalanche Fuji (43113)
- Arbitrum Sepolia (421614)

When multiple chains are configured:
- Players can switch between chains using the chain selector in the betting panel
- Chain preferences are persisted per wallet address
- Token balances update automatically when switching chains

**‚ö†Ô∏è IMPORTANT:** You must configure the same chains in both wagmi and BetSwirlSDKProvider!

#### Simple Setup (Using Default RPCs)

```tsx
import { createConfig, WagmiProvider, http } from 'wagmi'
import { base, polygon, arbitrum } from 'wagmi/chains'
import { QueryClient, QueryClientProvider } from '@tanstack/react-query'
import { OnchainKitProvider } from '@coinbase/onchainkit'
import { BetSwirlSDKProvider, TokenProvider, BalanceProvider } from '@betswirl/ui-react'

// 1. Choose your chains
const chains = [base, polygon, arbitrum]

// 2. Create wagmi config (uses default public RPCs)
const config = createConfig({
  chains,
  transports: {
    [base.id]: http(),
    [polygon.id]: http(),
    [arbitrum.id]: http(),
  },
})

// 3. Create query client
const queryClient = new QueryClient()

// 4. Setup providers
<WagmiProvider config={config}>
  <QueryClientProvider client={queryClient}>
    <OnchainKitProvider chain={base}>
      <BetSwirlSDKProvider
        initialChainId={base.id}
        supportedChains={chains.map(chain => chain.id)} // Same chains!
      >
        <TokenProvider>
          <BalanceProvider>
            <App />
          </BalanceProvider>
        </TokenProvider>
      </BetSwirlSDKProvider>
    </OnchainKitProvider>
  </QueryClientProvider>
</WagmiProvider>
```

#### Production Setup (Custom RPCs)

If you need your own RPC endpoints (recommended for production), use environment variables:

```tsx
const config = createConfig({
  chains,
  transports: {
    [base.id]: http(import.meta.env.VITE_BASE_RPC_URL),
    [polygon.id]: http(import.meta.env.VITE_POLYGON_RPC_URL),
    [arbitrum.id]: http(import.meta.env.VITE_ARBITRUM_RPC_URL),
  },
})
```

Create `.env` file in your project root:

```bash
VITE_BASE_RPC_URL=https://your-base-rpc.com
VITE_POLYGON_RPC_URL=https://your-polygon-rpc.com
VITE_ARBITRUM_RPC_URL=https://your-arbitrum-rpc.com
```

**Why custom RPCs?** Default public RPCs have rate limits and can be slow or unreliable.

‚ö†Ô∏è **Warning:** If you include a chain in `supportedChains` that is not configured in wagmi, users will see the chain option but it won't work when selected.


#### TokenWithImage Interface

```tsx
interface TokenWithImage {
  address: string      // Token contract address (use "0x0000000000000000000000000000000000000000" for native token)
  symbol: string       // Token symbol (e.g., "ETH", "DEGEN", "USDC")
  decimals: number     // Token decimals (18 for most tokens, 6 for USDC)
  image: string        // URL to token icon image
}
```

## Common Issues and Solutions

### TypeScript Errors

**Problem:** `Type 'string' is not assignable to type 'TokenWithImage'`

```tsx
// ‚ùå Wrong - missing required properties
<BetSwirlSDKProvider bankrollToken="DEGEN" />

// ‚úÖ Correct - complete TokenWithImage object
const DEGEN_TOKEN: TokenWithImage = {
  address: "0x4ed4E862860beD51a9570b96d89aF5E1B0Efefed",
  symbol: "DEGEN",
  decimals: 18,
  image: "https://www.betswirl.com/img/tokens/DEGEN.svg"
}
<BetSwirlSDKProvider bankrollToken={DEGEN_TOKEN} />
```

**Problem:** `Property 'initialChainId' is missing`

```tsx
// ‚ùå Wrong - missing required prop
<BetSwirlSDKProvider>
  <App />
</BetSwirlSDKProvider>

// ‚úÖ Correct - include required initialChainId
<BetSwirlSDKProvider initialChainId={base.id}>
  <App />
</BetSwirlSDKProvider>
```

### Token Configuration Issues

**Problem:** Token not appearing in the selection list

- Verify the token address is correct and matches the Bank contract
- Check that `allowed = true` and `paused = false` in the Bank contract
- Ensure the token is not filtered out by `filteredTokens` prop
- If using `filteredTokens`, make sure the token address is included in the array

**Problem:** Too many tokens in the selection list

Use `filteredTokens` to limit available options:
```tsx
// ‚úÖ Limit to specific tokens for better UX
<BetSwirlSDKProvider
  initialChainId={base.id}
  filteredTokens={["0x0000000000000000000000000000000000000000", "0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913"]}
>
  <App />
</BetSwirlSDKProvider>
```

**Problem:** Token icon not displaying

- Verify the `image` URL is accessible and returns a valid image
- Use the standard BetSwirl token image pattern: `https://www.betswirl.com/img/tokens/{SYMBOL}.svg`
- Ensure the image URL supports CORS for web applications

## Example Result

* **GitHub Repository**: [github.com/BetSwirl/betswirl-ui-react-demo](https://github.com/BetSwirl/betswirl-ui-react-demo)
* **Live Demo**: [betswirl-ui-react-demo.vercel.app](https://betswirl-ui-react-demo.vercel.app)

